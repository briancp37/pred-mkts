# [0-3] Header-aware rate limiter
[Back to task list](../tasks.md)

## Description
Token-bucket limiter with:
- Per-host buckets (optionally per-group via config).
- **Adaptive rate**: if headers expose `limit/remaining/reset`, adjust token refill or **sleep until reset**.
- **429/Retry-After**: honor header seconds or HTTP-date; otherwise backoff (jittered exponential).
- **5xx**: bounded retries with jitter; respect idempotency.
- Concurrency gate (semaphore).

## Requirements
- Grep anchors `# [CTX:PBI-0:0-3:RL]`.
- Deterministic unit tests around time via injectable clock.

## Implementation Plan
- `RateLimiter.acquire(request_spec)` returns awaitable/sync guard.
- Track moving window statistics for telemetry.
- Pluggable time provider for tests.

## Verification
- Unit tests: steady rate, burst, header-driven throttling, 429 & recovery.